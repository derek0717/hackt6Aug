function CustomMarker(e,t,o){this.latlng=e,this.args=o,this.setMap(t)}function getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition):console.log="Geolocation is not supported by this browser.",console.log("grabbing location")}function showPosition(e){console.log("Latitude: "+e.coords.latitude+" Longitude: "+e.coords.longitude);var t=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),o=new google.maps.Marker({position:t,title:"Hello World!",icon:"images/icon.png"});o.setMap(map)}function addNewPin(e,t){console.log("Add pin: Latitude: "+e+" Longitude: "+t);var o=new google.maps.LatLng(e,t),n=new google.maps.Marker({position:o,title:"added pin"});n.setMap(map),n.addListener("click",function(e){markerClick(this.LatLng)})}function addNewPinFromJSON(e){}function placeMarker(e){new google.maps.Marker({position:e,map:map,icon:"images/icon.png"});map.panTo(e)}function markerClick(e){console.log("click")}function readJsonAndCreateAllPins(e){for(var t=0,o=e.length;t<o;t++)addNewPinFromJSON(e[t])}function initialize(){var e={center:new google.maps.LatLng(22.286918099999998,114.1494163),zoom:15,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("googleMap"),e),google.maps.event.addListener(map,"click",function(e){placeMarker(e.latLng,map)})}function get(e){return new Promise(function(t,o){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){200==n.status?t(n.response):o(Error(n.statusText))},n.onerror=function(){o(Error("Network Error"))},n.send()})}function push(e){return new Promise(function(e,t){var o=new XMLHttpRequest;o.open("GET",theMainURL+"/addPin"),o.send(JSON.stringify(testThePins))})}function addtoJSON(){}CustomMarker.prototype=new google.maps.OverlayView,CustomMarker.prototype.draw=function(){var e=this,t=this.div;if(!t){t=this.div=document.createElement("div"),t.className="pin",t.style.position="absolute","undefined"!=typeof e.args.pin_id&&(t.dataset.pin_id=e.args.pin_id),"undefined"!=typeof e.args.title&&(t.dataset.title=e.args.title),"undefined"!=typeof e.args.message&&(t.dataset.message=e.args.message),google.maps.event.addDomListener(t,"click",function(e){e.stopPropagation(),console.log(this)});var o=this.getPanes();o.overlayImage.appendChild(t)}var n=this.getProjection().fromLatLngToDivPixel(this.latlng);n&&(t.style.left=n.x+"px",t.style.top=n.y+"px")},CustomMarker.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},CustomMarker.prototype.getPosition=function(){return this.latlng};var map,lastAddPin;google.maps.event.addDomListener(window,"load",initialize);var testThePins,theMainURL="http://192.168.11.179:8888";get(theMainURL+"/getPins").then(JSON.parse).then(function(e){testThePins=e,readJsonAndCreateAllPins(e)}),$(document).on("keypress",function(e){switch(console.log(e.which),e.which){case 112:}});